<!DOCTYPE html>
<html>
<head>
<title>Lat-Long</title>
</head>
<body onload="getDistance()">
  <center>
  <h3 style="padding-top: 1em">Calculate Distance Between 2 Coordinate Points</h3>
  <h4>By Alexander Dua</h4>
  </br>
  <p>Please enter all coordinates in decimal degrees.</p>
  </br>
  <p>Latitude 1, Longitude 1</p>
  <input type="text" id="lati1" value="">
  <span>,</span>
  <input type="text" id="long1" value="">
  </br>
  <p>Latitude 2, Longitude 2</p>
  <input type="text" id="lati2" value="">
  <span>,</span>
  <input type="text" id="long2" value="">
  </br>
  </br>
  <button onclick="getDistance()">Submit</button>
  </br>
  <h4 id="demo"></h4>
  </br>
  <p style="text-align:center; padding-left:300px; padding-right:300px;">This site uses the haversine formula to calculate the distance between two pairs of coordinates, both given in decimal degrees. The haversine formula is used to find the shortest between two points on a sphere, such as the Earth.</p>
  <p>The haversine formula is as follows:</p>
  <p>a = sin&#178;((latitude2 - latitude1) &#xF7; 2)	+ cos(latitude2) 	&times; cos(latitude1) &times; sin&#178;((longitude2 - longitude1) &#xF7; 2)</p>
  <p>c = 2 &times; atan2(&radic;a, &radic;(1-a))</p>
  <p>D = 6371000m &times; c</p>
  <p style="text-align:center; padding-left:250px; padding-right:250px;">6371000m is roughly the radius of the Earth in meters. Because this is not the exact radius of the Earth, there is slight error in the calculation, however, it is still more accurate than Google Maps's measure distance tool, as itt factors in the curvature of the Earth.</p>
  <p>The code for this site is available on Alexander Dua's GitHub at </p><a href="https://github.com/alexdua/latlong-distance" target="_blank">https://github.com/alexdua/latlong-distance</a>
  <p>The README.md flie which can be viewed on the GitHub site linked above provides a line by line description of the code used.</p>


  </center>
  <script>
   // Convert Degress to Radians
   function Deg2Rad( deg ) { // Creates a function called Deg2Rad that will take coordinates in decimal degrees and convert them to radians. deg is the input.
      return deg * Math.PI / 180; // Takes the input deg, multiplies it by pi, then divides it by 180.
   }

   function getDistance() // Creates a function called getDistance that will measure the distance between the two pairs of coordinates.
   {
       var la1 = document.getElementById("lati1").value; // Assigns the value of the first latitude coordinate to a variable called la1.
       var la2 = document.getElementById("lati2").value; // Assigns the value of the second latitude coordinate to a variable called la2.
       var lo1 = document.getElementById("long1").value; // Assigns the value of the first longitude coordinate to a variable called lo1.
       var lo2 = document.getElementById("long2").value; // Assigns the value of the second longitude coordinate to a variable called lo2.
       lat1 = Deg2Rad(la1); // Performs the degrees to radians operation on la1 as defined by the function Deg2Rad.
       lat2 = Deg2Rad(la2); // Performs the degrees to radians operation on la2 as defined by the function Deg2Rad.
       lon1 = Deg2Rad(lo1); // Performs the degrees to radians operation on lo1 as defined by the function Deg2Rad.
       lon2 = Deg2Rad(lo2); // Performs the degrees to radians operation on lo2 as defined by the function Deg2Rad.
       latDiff = lat2-lat1; // Assigns the value of the second latitude subtracted by the first latitude to the variable called latDiff.
       lonDiff = lon2-lon1; // Assigns the value of the second longitude subtracted by the first longitude to the variable called lonDiff.
       var R = 6371000; // Assigns the value of 6371000, approximately the radius of the Earth in meters, to the variable R;
       var φ1 = lat1; // Assigns the value of the first latitude coordinate to the the variable φ1.
       var φ2 = lat2; // Assigns the value of the second latitude coordinate to the the variable φ2.
       var Δφ = latDiff; // Assigns the value of the latDiff variable (defined above) to the the variable Δφ.
       var Δλ = lonDiff; // Assigns the value of the lonDiff variable (defined above) to the variable Δλ.

       var a = Math.sin(Δφ/2) * Math.sin(Δφ/2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ/2) * Math.sin(Δλ/2); // Assigns the resulting value from the equation to the variable a.

       var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); // Assigns the resulting value from the equation to variable b.

       var d = R * c; // Perform the operation multiplying R and c, and assign the product to variable d.

       document.getElementById("demo").innerHTML = 'Distance: ' + d + " meters"; // Create a string of text on the webpage that reads Distance: xx.xxx meters.
   }
 </script>
</body>
</html>
